---
title: Hexoä¹‹æ–‡ç« ç«™å†…æœç´¢
date: 2020-05-04 09:38:52
categories:
- [åšå®¢, Hexo]
tags:
---

### èƒŒæ™¯
å‰æœŸåœ¨æ­å»ºHexoè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå‰æœŸhexoçŸ¥è¯†ç‚¹å­¦ä¹ å’Œå®è·µï¼Œæ•…ä¸€ç›´é—ç•™äº†ä¸€ä¸ªæœç´¢åŠŸèƒ½ã€‚ç›®å‰åšå®¢å·²å†™äº†å°å‡ åç¯‡æ–‡ç« ï¼Œå†³å®šé›†æˆæœç´¢åŠŸèƒ½ï¼Œæ›´æ–¹ä¾¿æŸ¥æ‰¾åšæ–‡ï¼
<!--more-->
### æœç´¢ä»‹ç»
nextä¸»é¢˜è‡ªå¸¦Algolia Searchå’ŒLocal searchï¼Œç½‘ä¸ŠæŸ¥è¯¢è¿˜æœ‰Swiftypeå’Œå¾®æœç´¢ï¼Œä½†æ²¡å»ä»”ç»†äº†è§£åè€…ä¸¤æ¬¾ï¼Œå¹¶ä¸”Algolia Searchå’ŒSwiftypeéƒ½æ˜¯è¦æ”¶è´¹çš„ã€‚
Local searchæ˜¯æœ¬åœ°æœç´¢å³ç«™å†…æ–‡ç« æœç´¢ï¼Œé…ç½®ç®€å•æ–¹ä¾¿ï¼Œä¾èµ–wzpan/hexo-generator-searchï¼Œæ’ä»¶å®‰è£…åæ˜¯hexo-generator-searchdbï¼Œ`åŸç†æ˜¯é€šè¿‡hexo-generator-searchæ’ä»¶åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªsearch.xmlæ–‡ä»¶ï¼Œæœç´¢çš„æ—¶å€™ä»è¿™ä¸ªæ–‡ä»¶ä¸­æ ¹æ®å…³é”®å­—æ£€ç´¢å‡ºç›¸åº”çš„é“¾æ¥`ã€‚æ®ç½‘ä¸Šè¯´Local searchåœ¨æ–‡ç« é‡å¤§æ—¶ï¼Œæœç´¢æ•ˆç‡ä¼šå˜æ…¢ï¼Œåˆšå¼€å§‹ç”¨è¿˜ä¸äº†è§£ï¼Œå¯ä»¥å…ˆä½¿ç”¨ç€ã€‚æ•ˆæœè§æ–‡æœ«

Algolia Searchåˆšå¼€å§‹ä¸å¤ªäº†è§£ï¼Œæ˜¯ä¸€ä¸ªä¸‰æ–¹çš„æ’ä»¶ï¼Œnextä¸»é¢˜ä¹Ÿå†…åµŒäº†ã€‚ç½‘ä¸ŠæŸ¥é˜…ï¼Œéœ€è¦å»Algoliaå®˜ç½‘æ³¨å†Œè´¦æˆ·ï¼Œå¹¶å–å¾—appIdå’Œkeyï¼Œæ‰å¯ä»¥è¿›è¡Œé…ç½®å’Œä½¿ç”¨ï¼Œä¸”æœ‰åšå®¢ä½¿ç”¨Algoliaåï¼Œæœç´¢åªæ˜¾ç¤ºæ–‡ç« æ ‡é¢˜ï¼Œä¸æ˜¾ç¤ºæœå‡ºæ¥çš„æ–‡ç« å†…å®¹ï¼Œä½†æ˜¯æœ‰äººè¯´Algoliaåœ¨æ–‡ç« å¤§é‡æ—¶æ•ˆç‡é«˜ã€‚ 
æ•…æš‚æ—¶ä¸é‡‡ç”¨Algoliaï¼Œç­‰åæœŸçœ‹Local searchçš„æ€§èƒ½å†è€ƒè™‘æ›¿æ¢ï¼›
æ­¤å¤„å…ˆé™„ä¸Šå‚è€ƒæ–‡ç« 
[è“èƒ–çº¸ Hexo+Nexté›†æˆAlgoliaæœç´¢](https://juejin.im/post/5af3f9d1518825673e35a6eb)
[å¤§ä¸“æ   hexoæ·»åŠ algoliaæœç´¢](https://www.dazhuanlan.com/2020/03/16/5e6e6889ddae3/)

### Local searchä½¿ç”¨æ­¥éª¤
#### åŸç†
> é€šè¿‡hexo-generator-searchæ’ä»¶åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªsearch.xmlæ–‡ä»¶ï¼Œæœç´¢çš„æ—¶å€™ä»è¿™ä¸ªæ–‡ä»¶ä¸­æ ¹æ®å…³é”®å­—æ£€ç´¢å‡ºç›¸åº”çš„é“¾æ¥
> searchæ–‡ä»¶æ”¯æŒjsonå’Œxmlä¸¤ç§æ ¼å¼è¾“å‡ºã€‚

#### å®‰è£…plugin
[hexo-generator-search](https://github.com/theme-next/hexo-generator-search)
```
npm install hexo-generator-searchdb --save
```
#### nextä¸»é¢˜é…ç½®æ–‡ä»¶
å¼€å¯Local search
```
local_search:
  enable: true
  # if auto, trigger search by changing input
  # if manual, trigger search by pressing enter key or search button
  trigger: auto
  # show top n results per article, show all results by setting to -1
  top_n_per_article: 1
```
#### ç«™ç‚¹é…ç½®æ–‡ä»¶
é»˜è®¤å¼€å¯contentæœç´¢å’Œæ˜¾ç¤º
```
# ç«™å†…æ–‡ç« æœç´¢åŠŸèƒ½
search:
  path: search.xml
  field: post
  format: html
  limit: 10000
```
#### åº”ç”¨
å› ä¸ºä¿®æ”¹äº†ä¸»é¢˜é…ç½®ï¼Œéœ€è¦å…ˆcleanï¼Œå†é¢„è§ˆ`hexo clean && hexo s -g`
é¦–é¡µèœå•æ ç”Ÿæˆä¸€ä¸ª`æœç´¢ğŸ”`èœå•ï¼Œç‚¹å‡»æœç´¢ï¼Œè¾“å…¥æƒ³è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œå³å¯è‡ªåŠ¨æŸ¥å‡ºåŒ…å«è¾“å…¥æ–‡æœ¬çš„æ–‡ç« ã€‚
ä»¥åå¿«é€Ÿæ‰¾å†™è¿‡çš„å†…å®¹ï¼Œå¾ˆæ–¹ä¾¿å§ï½ï½
#### åŠ å¯†æ–‡ç« ä¸å¯æœç´¢
Searchä¸å¯æœç´¢åŠ å¯†çš„æ–‡ç« å†…å®¹ï¼Œä½†æ˜¯åŠ å¯†æ–‡ç« çš„æ ‡é¢˜ä¸å—é™åˆ¶ï¼Œå¯ä»¥æœç´¢ã€‚å› ä¸ºtag privateåŠ å¯†çš„æ–‡ç« ï¼Œæ˜¯å¯¹å†…å®¹æ‰§è¡ŒåŠ å¯†å¤„ç†çš„ï¼Œè€ŒSearchæ˜¯å¯¹åŒ…å«æ¸²æŸ“åŠ å¯†åçš„æ‰€æœ‰æ–‡ç« è¿›è¡Œæ–‡æœ¬æœç´¢çš„ã€‚
#### æœç´¢æ•ˆæœ
{% qnimg /2020-05-04-Hexoä¹‹æœç´¢é›†æˆ/20200504112401399.png %}
### Fixed bug
Issueï¼š`ç‚¹å‡»æœç´¢ğŸ”ï¼Œä¸€ç›´åŠ è½½loadingæ¡†ï¼Œæ— æ³•æœç´¢å†…å®¹ã€‚`
ç½‘ä¸ŠæŸ¥è¯¢ï¼Œæœ‰å¾ˆå¤šäººé‡åˆ°åŠ è½½loadingçš„ç°è±¡ï¼Œä½†æ˜¯åŸå› å„ä¸ç›¸åŒï¼Œè‚¯å®šæ˜¯ç¨‹åºè¿è¡Œæ—¶å“ªä¸ªé…ç½®å‡ºäº†é—®é¢˜ã€‚
è°ƒæŸ¥æ–¹æ³•ï¼šæ‰“å¼€chromeå¼€å‘è€…å·¥å…·ï¼Œçœ‹åå°æŠ¥é”™æ—¥å¿—ã€‚æ—¥å¿—æ²¡è®°ä¸‹æ¥ï¼Œå¤§æ¦‚æ˜¯Algolia Invalid errorã€‚
åŸå› ï¼šèµ·åˆè°ƒè¯•Local searchå’ŒAlgolia Searchæ—¶ï¼Œä¸¤ä¸ªå¼€å…³enableéƒ½è®¾ç½®äº†trueï¼Œåæ¥npmå®‰è£…äº†Local search pluginï¼Œä½†æ²¡æœ‰å®‰è£…Algolia Search pluginï¼Œå®é™…æ˜¯æˆ‘æ²¡æœ‰ç”¨Algolia Searchï¼Œä½†å¼€å¯äº†Algolia Searchã€‚
è§£å†³ï¼šå…³é—­Algolia Searchï¼Œenableè®¾ç½®falseï¼Œé‡æ–°hexoé¢„è§ˆè§£å†³ã€‚
